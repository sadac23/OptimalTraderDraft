# StockInfo系クラス リファクタリング方針案

## 目的

- 肥大化した`StockInfo`クラスの責務を分割し、共通化を図る
- 派生クラス（`IndexInfo`, `JapaneseETFInfo`等）の実装方針を統一する
- 今後の拡張性やテスト容易性を高める

---

## 方針概要

- 外部情報取得や出力処理の責務を、Strategyパターンによる委譲で実現する
- 共通ロジックは`StockInfo`に集約し、個別ロジックは委譲先（Strategy）で実装する
- 派生クラスは「委譲先の実装を差し替えるだけ」で拡張できる構造とする

---

## 構成イメージ

1. 外部情報取得・出力処理のためのインターフェースを用意し、責務を明確に分離する
2. `StockInfo`は共通プロパティ・ロジックを持ち、Updater/Formatter（Strategy）を委譲で保持する
3. 派生クラス（例：`IndexInfo`, `JapaneseETFInfo`）は、用途に応じたUpdater/Formatterを渡して初期化する
4. 新しい銘柄種別が増えても、Updater/Formatterを用意するだけで拡張できる

---

## メリット

- **拡張性**：新しい銘柄種別もStrategy実装を追加するだけで対応可能
- **テスト容易性**：Updater/Formatter単位でMock化・単体テストが容易
- **保守性**：共通ロジックはStockInfo、個別ロジックはStrategyで分離されるため、保守がしやすい

---

## まとめ

- `StockInfo`の肥大化を防ぎ、派生クラスの実装を統一
- 今後の拡張やテストが容易な設計に刷新することで、保守性・品質向上を実現

ご参考ください。
